{% extends 'student/base_new.html' %}

{% block title %}Student List - Student Management System{% endblock %}

{% block content %}
<h1 class="page-title">
    <i class="fas fa-users"></i>
    Students
</h1>

<!-- Search Box -->
<div class="card" style="margin-bottom: 20px;">
    <form method="GET" style="display: flex; gap: 10px;">
        <input type="text" name="q" placeholder="Search by name, email or course..." value="{{ search_query }}" style="flex: 1; padding: 11px 13px; border: 1px solid #d1d9e0; border-radius: 5px; font-size: 1rem;">
        <button type="submit" class="btn btn-primary"><i class="fas fa-search"></i> Search</button>
        {% if search_query %}
            <a href="{% url 'student_list' %}" class="btn btn-secondary"><i class="fas fa-times"></i> Clear</a>
        {% endif %}
    </form>
</div>

<!-- Add Student Button -->
<div style="margin-bottom: 20px;">
    <a href="{% url 'add_student' %}" class="btn btn-success"><i class="fas fa-user-plus"></i> Add New Student</a>
</div>

{% if students %}
    <p style="color: #7f8c8d; margin-bottom: 15px; font-size: 0.9rem;"><i class="fas fa-info-circle"></i> Found {{ students.count }} student(s)</p>

    <!-- Students Table -->
    <div class="table-responsive">
        <table>
            <thead>
                <tr>
                    <th>#</th>
                    <th><i class="fas fa-user"></i> Name</th>
                    <th><i class="fas fa-envelope"></i> Email</th>
                    <th><i class="fas fa-birthday-cake"></i> Age</th>
                    <th><i class="fas fa-book"></i> Course</th>
                    <th style="text-align: center;">Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for student in students %}
                <tr>
                    <td>{{ forloop.counter }}</td>
                    <td><strong>{{ student.name }}</strong></td>
                    <td>{{ student.email }}</td>
                    <td>{{ student.age }}</td>
                    <td><span style="background: #ecf0f5; color: #34495e; padding: 5px 10px; border-radius: 4px; font-size: 0.85rem; font-weight: 500;">{{ student.course }}</span></td>
                    <td style="text-align: center;">
                        <a href="{% url 'student_detail' student.id %}" class="btn btn-primary btn-sm"><i class="fas fa-eye"></i> View</a>
                        <a href="{% url 'edit_student' student.id %}" class="btn btn-secondary btn-sm"><i class="fas fa-edit"></i> Edit</a>
                        <a href="{% url 'delete_student' student.id %}" class="btn btn-danger btn-sm" onclick="return confirm('Are you sure?')"><i class="fas fa-trash"></i> Delete</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% else %}
    <div class="card" style="text-align: center; padding: 60px;">
        <i class="fas fa-inbox" style="font-size: 3rem; color: #d1d9e0; margin-bottom: 20px;"></i>
        <h3 style="color: #34495e;">No Students Found</h3>
        <p style="color: #95a5a6; margin-bottom: 20px; margin-top: 10px;">
            {% if search_query %}
                No students match your search criteria.
            {% else %}
                No students added yet. Start by adding your first student!
            {% endif %}
        </p>
        <a href="{% url 'add_student' %}" class="btn btn-primary"><i class="fas fa-user-plus"></i> Add First Student</a>
    </div>
{% endif %}

{% endblock %}
